<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>EXAMEN VIAJES 17-18</title>

    <script type="text/javascript" src="index.js"></script>
  </head>
  <body onload="cargaViajes();">
    <div>
      <table border="1" id="idTiposViajes" align="center"></table>
      <input
        type="button"
        value="Mostar viajes Comprados"
        id="mostrar"
        onclick="MostrarViajes();"
      />
    </div>
    <br />
    <div id="idDatosvIAJES">
      <table border="1" id="idViajes" align="center"></table>

      <p>
        <input
          type="button"
          value="Comprar"
          id="comprar"
          onclick="cargarFormulario();"
          disabled
        />
        <input
          type="button"
          value="Devolver Viaje"
          id="devolver"
          onclick="DevolverViaje();"
          disabled
        />
      </p>
    </div>
    <div id="formularioCompra">
      <br />
      <label>Nombre comprador:</label><input type="text" id="idnombre" /><br />
      <label>Descripción:</label
      ><input type="text" id="idDescripcion" disabled /><br />
      <label>Email:</label><input type="text" id="idEmail" /><br />
      <label>Número de viajes:</label
      ><input type="text" id="idDedicatoria" /><br />
      <label>Precio:</label><input type="text" id="idPrecio" disabled /><br />
      <label>Numero tarjeta:</label><input type="text" id="idnumero" /><br />
      <label>CSV:</label><input type="text" id="idcsv" /><br />
      <button id="idComprar" onclick="ComprarViaje();">Comprar de viaje</button>
    </div>
    <div id="todosViajes"></div>

    <script>
      fetch("viaje.json")
        // .a continuación, se ejecuta cuando el servidor remoto responde
        .then(function (response) {
          // response.text() devuelve una nueva promesa que se resuelve con el texto de respuesta completo
          // cuando se carga
          return response.json();
        })
        .then(function (objeto) {
          // ...y aquí está el contenido del archivo remoto
          let tabla = document.getElementById("tabla");
          for (let i = 0; i < 3; i++) {
            let fila = document.createElement("tr");
            tabla.append(fila);
            let celdati = document.createElement("td");
            let celdafe = document.createElement("td");
            let celdate = document.createElement("td");
            celdati.append(objeto.fechas[i].titulo);
            celdafe.append(objeto.fechas[i].fecha);
            celdate.append(objeto.fechas[i].texto);

            fila.append(celdati);
            fila.append(celdafe);
            fila.append(celdate);

            //alert(objeto.fechas[0].titulo); // {"name": "iliakan", isAdmin: true}
          }
        });
    </script>
  </body>
</html>
